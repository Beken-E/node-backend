(function(e){function t(t){for(var r,i,l=t[0],c=t[1],o=t[2],p=0,d=[];p<l.length;p++)i=l[p],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&d.push(n[i][0]),n[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,o||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,l=1;l<a.length;l++){var c=a[l];0!==n[c]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},n={app:0},s=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var o=0;o<l.length;o++)t(l[o]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"132d":function(e,t,a){},"269b":function(e,t,a){"use strict";a("b0a4")},"43b1":function(e,t,a){},"4e8a":function(e,t,a){"use strict";a("9cc4")},"52c7":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("a026"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("router-view")],1)},s=[],i={name:"App"},l=i,c=(a("034f"),a("2877")),o=Object(c["a"])(l,n,s,!1,null,null,null),u=o.exports,p=(a("45fc"),a("8c4f")),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Header"),a("Sidebar"),a("div",{staticClass:"content"},[a("router-view")],1)],1)},_=[],m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"header"},[a("div",{staticClass:"name"},[e._v(e._s(e.username))]),a("div",{staticClass:"logout"},[a("router-link",{attrs:{to:"login"}},[e._v("Выход")])],1)])},f=[],v={name:"Header",data:function(){return{username:this.$getUser()}},props:{}},h=v,b=(a("b929"),Object(c["a"])(h,m,f,!1,null,"657c12cc",null)),g=b.exports,k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("aside",{staticClass:"sidebar"},[r("nav",[r("div",{staticClass:"logo"},[r("router-link",{attrs:{to:"/"}},[r("img",{attrs:{src:a("77e90"),alt:""}})])],1),r("ul",[r("li",[r("router-link",{staticClass:"sidebar_link",attrs:{to:"/clients"}},[r("i",{staticClass:"el-icon-s-custom"}),r("span",[e._v("Клиенты")])])],1),r("li",[r("router-link",{staticClass:"sidebar_link",attrs:{to:"/requests"}},[r("i",{staticClass:"el-icon-s-claim"}),r("span",[e._v("Заявки")])])],1),r("li",[r("router-link",{staticClass:"sidebar_link",attrs:{to:"/transactions"}},[r("i",{staticClass:"el-icon-s-marketing"}),r("span",[e._v("Транзакции")])])],1),r("li",[r("router-link",{staticClass:"sidebar_link",attrs:{to:"/reports"}},[r("i",{staticClass:"el-icon-s-data"}),r("span",[e._v("Отчеты")])])],1),r("li",[r("router-link",{staticClass:"sidebar_link",attrs:{to:"/settings"}},[r("i",{staticClass:"el-icon-s-tools"}),r("span",[e._v("Настройки")])])],1)]),e.isAdmin?r("ul",{staticClass:"dark mt-auto"},[r("li",[r("router-link",{staticClass:"sidebar_link",attrs:{to:"/companies"}},[r("i",{staticClass:"el-icon-s-cooperation"}),r("span",[e._v("Организации")])])],1),r("li",[r("router-link",{staticClass:"sidebar_link",attrs:{to:"/users"}},[r("i",{staticClass:"el-icon-user-solid"}),r("span",[e._v("Пользователи")])])],1)]):e._e()])])},x=[],y={name:"Sidebar",data:function(){return{}},props:{},components:{},methods:{},computed:{isAdmin:function(){return"admin"==this.$localStorage.get("role")}}},w=y,C=(a("8d99"),Object(c["a"])(w,k,x,!1,null,"d240f188",null)),R=C.exports,S={components:{Header:g,Sidebar:R},name:"Index",data:function(){return{}},props:{username:String}},O=S,D=(a("8be3"),Object(c["a"])(O,d,_,!1,null,"326bc117",null)),$=D.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"flex flex-between topline"},[a("h2",{staticClass:"title"},[e._v("Клиенты")]),a("router-link",{staticClass:"btn main-btn",attrs:{to:"/add-client"}},[a("span",[e._v("Добавить нового")])])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.clientlist}},[a("el-table-column",{attrs:{label:"ИНН",prop:"inn"}}),a("el-table-column",{attrs:{label:"ФИО"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.name?a("span",[e._v(e._s(t.row.name))]):t.row.firstName?a("span",[e._v(e._s(t.row.lastName+" "+t.row.firstName))]):a("span",[e._v("Нет")])]}}])}),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.getClientTransaction(t.row.clntSrcCftId)}}},[a("i",{staticClass:"el-icon-info"})])]}}])})],1),e.showClientHistory?a("div",{staticClass:"fixed-modal modal"},[a("div",{staticClass:"modal_content"},[a("el-table",{staticClass:"history_list",attrs:{data:e.clientHistory}},[a("el-table-column",{attrs:{label:"Карта",prop:"cardPan"}}),a("el-table-column",{attrs:{label:"Сумма",prop:"amount"}}),a("el-table-column",{attrs:{label:"Дата",prop:"createdAt"}})],1),a("div",{staticClass:"btn_list"},[a("el-button",{staticClass:"close-btn",attrs:{type:"cancel"},on:{click:function(t){t.preventDefault(),e.showClientHistory=!1}}},[e._v("Закрыть")])],1)],1)]):e._e()],1)},j=[],T=(a("96cf"),a("1da1")),M={components:{},name:"Clients",data:function(){return{clientlist:[],clientHistory:[],showClientHistory:!1}},props:{},methods:{getClients:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("/ibs/getClients");case 3:a=t.sent,200==a.status&&(e.clientlist=a.data),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log("[ERR]",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getClientTransaction:function(e){var t=this;return Object(T["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,r="/ibs/getTransactions?clntSrcCftId="+e,a.next=4,t.$axios.get(r);case 4:n=a.sent,200==n.status&&(t.showClientHistory=!0,t.clientHistory=n.data),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),console.log("[ERR]",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()},cardNumberInTable:function(e){return e+="1",e}},mounted:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getClients();case 2:case"end":return t.stop()}}),t)})))()}},I=M,N=(a("6775"),Object(c["a"])(I,E,j,!1,null,"a95faa5a",null)),A=N.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"flex flex-between topline"},[a("h2",{staticClass:"title"},[e._v("Организации")]),a("el-button",{attrs:{type:"success",icon:"el-icon-check"},on:{click:function(t){e.showAddCompany=!0}}},[e._v("Добавить")])],1),a("div",{staticClass:"company_list"},[a("el-table",{staticStyle:{width:"400px"},attrs:{data:e.company_list}},[a("el-table-column",{attrs:{label:"Имя",prop:"name"}}),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteMKK(t.row._id)}}},[a("i",{staticClass:"el-icon-delete"})])]}}])})],1)],1),e.showAddCompany?a("div",{staticClass:"add_company modal"},[a("el-form",{ref:"form",staticClass:"form",attrs:{"label-width":"120px"}},[a("h3",{staticClass:"modal_title"},[e._v("Добавить новую организацию")]),a("el-form-item",{attrs:{label:"Название: "}},[a("el-input",{attrs:{placeholder:"Введите название организации"},model:{value:e.mkk_name,callback:function(t){e.mkk_name=t},expression:"mkk_name"}})],1),a("el-form-item",{staticClass:"step_btn_list"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.createMKK(t)}}},[e._v("Добавить")]),a("el-button",{attrs:{type:"cancel"},on:{click:function(t){t.preventDefault(),e.showAddCompany=!1}}},[e._v("Закрыть")])],1)],1)],1):e._e()])},U=[],K=(a("4de4"),{components:{},name:"Companies",data:function(){return{company_list:[],mkk_name:"",showAddCompany:!1}},props:{},methods:{getMKK:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("/mkk/getMkk");case 3:a=t.sent,200==a.status&&(e.company_list=a.data),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log("[ERR]",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},createMKK:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={name:e.mkk_name},t.next=4,e.$axios.post("/mkk/createMkk",a);case 4:r=t.sent,200!=r.status&&201!=r.status||(e.company_list.push(r.data),e.mkk_name="",e.showAddCompany=!1),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log("[ERR]",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},deleteMKK:function(e){var t=this;return Object(T["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=confirm("Вы уверены, что хотите удалить?"),!r){a.next=12;break}return a.prev=2,a.next=5,t.$axios.delete("/mkk/deleteMkk",{data:{mkkId:e}});case 5:n=a.sent,200!=n.status&&201!=n.status||(t.company_list=t.company_list.filter((function(t){return t._id!=e}))),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](2),console.log("[ERR]",a.t0);case 12:case"end":return a.stop()}}),a,null,[[2,9]])})))()}},mounted:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getMKK();case 2:case"end":return t.stop()}}),t)})))()}}),Y=K,z=(a("4e8a"),Object(c["a"])(Y,P,U,!1,null,"3e97d250",null)),F=z.exports,L=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},H=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"flex flex-between topline"},[a("h2",{staticClass:"title"},[e._v("Заявки")])])])}],q={components:{},name:"Requests",data:function(){return{}},props:{username:String}},X=q,G=Object(c["a"])(X,L,H,!1,null,"45dbcaa8",null),B=G.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),a("div",[a("el-table",{staticClass:"history_list",attrs:{data:e.transactionlist,"default-sort":{prop:"createdAt",order:"descending"}}},[a("el-table-column",{attrs:{label:"Карта",prop:"cardPan",formatter:e.formatCardNumber}}),a("el-table-column",{attrs:{label:"Сумма",prop:"amount"}}),a("el-table-column",{attrs:{label:"Дата",prop:"createdAt",formatter:e.formatReportDate}})],1)],1)])},Q=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex flex-between topline"},[a("h2",{staticClass:"title"},[e._v("Транзакции")])])}],W=(a("fb6a"),a("ac1f"),a("5319"),{components:{},name:"Transactions",data:function(){return{transactionlist:[]}},props:{},methods:{formatCardNumber:function(e,t){return e.cardPan.replace(/(\d)(?=(\d{4})+$)/g,"$1 ")},formatReportDate:function(e,t){var a=e[t.property];return a.replace("T"," ").slice(0,-5)},getTransactions:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("/mkk/getTransactions");case 3:a=t.sent,200==a.status&&(e.transactionlist=a.data,console.log(a.data)),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log("[ERR]",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},mounted:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getTransactions();case 2:case"end":return t.stop()}}),t)})))()}}),V=W,Z=(a("96e2"),Object(c["a"])(V,J,Q,!1,null,"43fdcf2e",null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),a("el-form",[a("el-form-item",{attrs:{label:"Дата начала:"}},[a("el-date-picker",{attrs:{type:"date",placeholder:this.formatDates(new Date),format:"dd/MM/yyyy","value-format":" dd.MM.yyyy"},model:{value:e.report_start_date,callback:function(t){e.report_start_date=t},expression:"report_start_date"}})],1),a("el-form-item",{attrs:{label:"Дата окончания:"}},[a("el-date-picker",{attrs:{type:"date",placeholder:this.formatDates(new Date),format:"dd/MM/yyyy","value-format":" dd.MM.yyyy"},model:{value:e.report_finish_date,callback:function(t){e.report_finish_date=t},expression:"report_finish_date"}})],1),a("el-form-item",{staticStyle:{"margin-top":"40px"}},[a("el-button",{attrs:{type:"primary",disabled:this.report_finish_date.length<1||this.report_start_date.length<1},on:{click:function(t){return t.preventDefault(),e.getReportList(t)}}},[e._v("Получить отчет ")])],1),a("el-input",{staticClass:"search-input",attrs:{placeholder:"Поиск по ФИО"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("div",[a("el-table",{staticClass:"history_list",attrs:{data:e.reportlist.filter((function(t){return!e.search||t.FIO.toLowerCase().includes(e.search.toLowerCase())})),"default-sort":{prop:"END_DATE",order:"descending"}}},[a("el-table-column",{attrs:{sortable:"",label:"№",prop:"NUMB",width:"80"}}),a("el-table-column",{attrs:{label:"ИНН",prop:"INN"}}),a("el-table-column",{attrs:{sortable:"",label:"ФИО",prop:"FIO",width:"320"}}),a("el-table-column",{attrs:{label:"Карта",prop:"PAN",formatter:e.formatCardNumber}}),a("el-table-column",{attrs:{label:"Сумма",prop:"AMOUNT",width:"150"}}),a("el-table-column",{attrs:{sortable:"",label:"Статус",prop:"STATUS"}}),a("el-table-column",{attrs:{label:"Сотрудник",prop:"CUSER"}}),a("el-table-column",{attrs:{sortable:"",label:"Дата создания",prop:"CREATE_DATE",formatter:e.formatReportDate}}),a("el-table-column",{attrs:{sortable:"",label:"Дата изменения",prop:"END_DATE",formatter:e.formatReportDate}})],1)],1)],1)},ae=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex flex-between topline"},[a("h2",{staticClass:"title"},[e._v("Отчеты")])])}],re=(a("a15b"),a("d3b7"),a("25f0"),a("4d90"),{components:{},name:"Reports",data:function(){return{reportlist:[],report_start_date:"",report_finish_date:"",defaultDate:this.formatDates(new Date),mkk_name:this.$getCurrentMkk(),search:""}},props:{},methods:{formatCardNumber:function(e,t){return e.PAN.replace(/(\d)(?=(\d{4})+$)/g,"$1 ")},formatReportDate:function(e,t){var a=e[t.property];return a.replace("T"," ").slice(0,-5)},padTo2Digits:function(e){return e.toString().padStart(2,"0")},formatDates:function(e){return[this.padTo2Digits(e.getDate()),this.padTo2Digits(e.getMonth()+1),e.getFullYear()].join(".")},getReportList:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a="/ibs/orderReport",r={p_mkk_name:e.mkk_name,p_start_date:e.report_start_date,p_end_date:e.report_finish_date},console.log(e.report_start_date),console.log(e.report_finish_date),t.next=7,e.$axios.post(a,r);case 7:n=t.sent,200!=n.status&&201!=n.status||(e.reportlist=JSON.parse(n.data)),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log("[ERR]",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}},mounted:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getReportList();case 2:case"end":return t.stop()}}),t)})))()}}),ne=re,se=(a("5cc5"),Object(c["a"])(ne,te,ae,!1,null,"09b4f54a",null)),ie=se.exports,le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"flex flex-between topline"},[a("h2",{staticClass:"title"},[e._v("Пользователи")]),a("el-button",{attrs:{type:"success",icon:"el-icon-check"},on:{click:function(t){e.showAddUser=!0,e.getMKK()}}},[e._v("Добавить")])],1),a("div",{staticClass:"userlist"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userlist}},[a("el-table-column",{attrs:{label:"Имя",prop:"name"}}),a("el-table-column",{attrs:{label:"email",prop:"email"}}),a("el-table-column",{attrs:{label:"Организация",prop:"company_name"}}),a("el-table-column",{attrs:{label:"Роль",prop:"role"}}),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.getUser(t.row.id)}}},[a("i",{staticClass:"el-icon-edit"})]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUser(t.row.id)}}},[a("i",{staticClass:"el-icon-delete"})])]}}])})],1)],1),e.showAddUser?a("div",{staticClass:"modal"},[a("el-form",{ref:"form",staticClass:"form",attrs:{"label-width":"120px"}},[a("h3",{staticClass:"modal_title"},[e._v("Добавить нового пользователя")]),a("el-form-item",{attrs:{label:"Фамилия Имя"}},[a("el-input",{model:{value:e.user_name,callback:function(t){e.user_name=t},expression:"user_name"}})],1),a("el-form-item",{attrs:{label:"Почта"}},[a("el-input",{attrs:{type:"email"},model:{value:e.user_email,callback:function(t){e.user_email=t},expression:"user_email"}})],1),a("el-form-item",{attrs:{label:"Пароль"}},[a("el-input",{model:{value:e.user_password,callback:function(t){e.user_password=t},expression:"user_password"}})],1),a("el-form-item",{attrs:{label:"Организация"}},[a("el-select",{attrs:{placeholder:"Выбрать"},model:{value:e.user_mkk_value,callback:function(t){e.user_mkk_value=t},expression:"user_mkk_value"}},e._l(e.company_list,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{staticClass:"step_btn_list"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.createUser(t)}}},[e._v("Добавить")]),a("el-button",{attrs:{type:"cancel"},on:{click:function(t){t.preventDefault(),e.showAddUser=!1}}},[e._v("Закрыть")])],1)],1)],1):e._e()])},ce=[],oe=(a("d81d"),a("b0c0"),{components:{},name:"Users",data:function(){return{showAddUser:!1,company_list:[],userlist:[],user_name:"",user_email:"",user_password:"",user_mkk_value:""}},props:{},methods:{getMKK:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("/mkk/getMkk");case 3:a=t.sent,200==a.status&&(e.company_list=a.data),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log("[ERR]",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getUsers:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getMKK();case 3:return t.next=5,e.$axios.get("/users");case 5:a=t.sent,200==a.status&&(e.userlist=a.data.results,e.userlist=e.userlist.map((function(t){if(t.company_name="",t.mkk){var a=e.company_list.filter((function(e){return e._id==t.mkk}));a&&(t.company_name=a[0].name)}return t}))),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log("[ERR]",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},createUser:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={name:e.user_name,email:e.user_email,password:e.user_password,mkk:e.user_mkk_value,role:"user"},t.next=4,e.$axios.post("/users",a);case 4:r=t.sent,console.log(r),200!=r.status&&201!=r.status||(e.getUsers(),e.showAddUser=!1),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),t.t0.response&&alert(t.t0.response.data.message);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},deleteUser:function(e){var t=this;return Object(T["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=confirm("Вы уверены, что хотите удалить?"),!r){a.next=12;break}return a.prev=2,a.next=5,t.$axios.delete("/users/"+e);case 5:n=a.sent,204==n.status&&(t.userlist=t.userlist.filter((function(t){return t.id!=e}))),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](2),console.log("[ERR]",a.t0);case 12:case"end":return a.stop()}}),a,null,[[2,9]])})))()},updateUser:function(e,t,a,r){var n=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={},t.next=4,n.$axios.patch("/users/"+e,a);case 4:r=t.sent,204==r.status&&(n.userlist=n.userlist.filter((function(t){return t.id!=e}))),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log("[ERR]",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getUser:function(e){var t=this;return Object(T["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$axios.get("/users/"+e);case 3:r=a.sent,204!=r.status&&200!=r.status||(console.log("User: ",r),t.showAddUser=!0,t.user_email=r.data.email,t.user_name=r.data.name),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),console.log("[ERR]",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()}},mounted:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getUsers();case 2:case"end":return t.stop()}}),t)})))()}}),ue=oe,pe=(a("5794"),Object(c["a"])(ue,le,ce,!1,null,"0899070a",null)),de=pe.exports,_e=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},me=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"flex flex-between topline"},[a("h2",{staticClass:"title"},[e._v("Настройки")])])])}],fe={components:{},name:"Settings",data:function(){return{}},props:{}},ve=fe,he=Object(c["a"])(ve,_e,me,!1,null,"46944418",null),be=he.exports,ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h1",[e._v("Вход")]),a("form",{staticClass:"login_form",on:{submit:function(t){return t.preventDefault(),e.onLogin(t)}}},[a("div",{staticClass:"ab_group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"ab_input",attrs:{required:"",type:"text"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),a("span",{staticClass:"highlight"}),a("span",{staticClass:"bar"}),a("label",[e._v("Имя")])]),a("div",{staticClass:"ab_group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"ab_input",attrs:{type:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),a("span",{staticClass:"highlight"}),a("span",{staticClass:"bar"}),a("label",[e._v("Пароль")])]),a("div",{staticClass:"ab_group"},[a("el-button",{attrs:{type:"success"},on:{click:e.onLogin}},[e._v("Вход")])],1)])])},ke=[],xe={name:"Login",data:function(){return{username:"",password:""}},methods:{onLogin:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={email:e.username,password:e.password},t.next=4,e.$axios.post("/auth/login",a);case 4:r=t.sent,200==r.status&&(e.$setToken(r.data.tokens.access.token),e.$setUser(r.data.user.name),e.$setCurrentMkk(r.data.user.mkk),e.$localStorage.set("role",r.data.user.role),e.$router.push("/clients")),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),alert("Ошибка авторизации"),console.log("[ERR]",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},mounted:function(){this.$localStorage.clear()}},ye=xe,we=(a("574b"),Object(c["a"])(ye,ge,ke,!1,null,"01c48b64",null)),Ce=we.exports,Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Header"),a("Sidebar"),a("div",{staticClass:"content"},[a("h1",[e._v("404 Error")]),a("router-link",{attrs:{to:"/"}},[e._v("back")])],1)],1)},Se=[],Oe={name:"ErrorPage",components:{Header:g,Sidebar:R},data:function(){return{}},methods:{}},De=Oe,$e=Object(c["a"])(De,Re,Se,!1,null,null,null),Ee=$e.exports,je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",[e._v("Добавить клиента")]),a("div",{staticClass:"add_client_form"},[""==e.showAddCard?a("el-form",{staticClass:"form",attrs:{"label-width":"140px"}},[a("el-form-item",{attrs:{label:"ИНН"}},[a("el-input",{directives:[{name:"mask",rawName:"v-mask",value:"##############",expression:"'##############'"}],attrs:{type:"text",maxlength:"14",minlength:"14","show-word-limit":""},model:{value:e.client_inn,callback:function(t){e.client_inn=t},expression:"client_inn"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:this.client_inn.length<14},on:{click:function(t){return t.preventDefault(),e.checkClient(t)}}},[e._v("Продолжить")])],1)],1):e._e(),"not_found"==e.showAddCard?a("div",{staticClass:"new_client_info"},[a("div",{staticClass:"step_list"},[a("div",{staticClass:"step_item",class:{active:"1"==this.current_step}},[e._v("Личные данные")]),a("div",{staticClass:"step_item",class:{active:"2"==this.current_step}},[e._v("Паспорт")]),a("div",{staticClass:"step_item",class:{active:"3"==this.current_step}},[e._v("Адрес")]),a("div",{staticClass:"step_item",class:{active:"4"==this.current_step}},[e._v("Контакты")]),a("div",{staticClass:"step_item",class:{active:"5"==this.current_step}},[e._v("Карта")])]),a("div",{staticClass:"step_content step_1",class:{show:"1"==this.current_step}},[a("el-form",{staticClass:"form",attrs:{"label-width":"200px"}},[a("el-form-item",{attrs:{label:"ИНН:"}},[a("el-input",{attrs:{type:"text",readonly:"",placeholder:"Введите ИНН клиента"},model:{value:e.client_inn,callback:function(t){e.client_inn=t},expression:"client_inn"}})],1),a("el-form-item",{attrs:{label:"Фамилия:"}},[a("el-input",{attrs:{placeholder:"Введите фамилию"},model:{value:e.client_lastname,callback:function(t){e.client_lastname=t},expression:"client_lastname"}})],1),a("el-form-item",{attrs:{label:"Имя:"}},[a("el-input",{attrs:{placeholder:"Введите имя"},model:{value:e.client_firstname,callback:function(t){e.client_firstname=t},expression:"client_firstname"}})],1),a("el-form-item",{attrs:{label:"Отчество:"}},[a("el-input",{attrs:{placeholder:"Введите отчество"},model:{value:e.client_midname,callback:function(t){e.client_midname=t},expression:"client_midname"}})],1),a("el-form-item",{attrs:{label:"Пол:"}},[a("el-radio-group",{model:{value:e.client_sex,callback:function(t){e.client_sex=t},expression:"client_sex"}},[a("el-radio",{attrs:{label:2047936}},[e._v("Женский")]),a("el-radio",{attrs:{label:2047935}},[e._v("Мужской")])],1)],1),a("el-form-item",{attrs:{label:"Место рождения:"}},[a("el-select",{staticClass:"w50 mr15",attrs:{filterable:"",placeholder:"Выберите область"},on:{change:e.getCityFromRegion},model:{value:e.selected_region,callback:function(t){e.selected_region=t},expression:"selected_region"}},e._l(e.client_birth_place_region_option,(function(e){return a("el-option",{key:e.REGN_ID,attrs:{label:e.REGN_NAME,value:e.REGN_ID}})})),1),a("el-select",{staticClass:"w50",attrs:{filterable:"",placeholder:"Выберите город"},model:{value:e.client_birth_place,callback:function(t){e.client_birth_place=t},expression:"client_birth_place"}},e._l(e.client_birth_filtered_place_option,(function(e){return a("el-option",{key:e.CITY_SRC_CFT_ID,attrs:{label:e.CITY_NAME,value:e.CITY_SRC_CFT_ID}})})),1)],1),a("el-form-item",{attrs:{label:"Дата рождения:"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"Выберите дату",format:"dd/MM/yyyy","value-format":"yyyyMMdd","picker-options":e.pickBirthDateOptions},model:{value:e.client_birthdate,callback:function(t){e.client_birthdate=t},expression:"client_birthdate"}})],1),a("el-form-item",{attrs:{label:"Семейное положение:"}},[a("el-select",{attrs:{placeholder:"Выберите"},model:{value:e.client_marriage_status,callback:function(t){e.client_marriage_status=t},expression:"client_marriage_status"}},e._l(e.client_marriage_options,(function(e){return a("el-option",{key:e.FMLT_SRC_CFT_ID,attrs:{label:e.FMLT_NAME,value:e.FMLT_SRC_CFT_ID}})})),1)],1),a("el-form-item",{attrs:{label:"ПДЛ:"}},[a("el-radio-group",{model:{value:e.client_ipdl,callback:function(t){e.client_ipdl=t},expression:"client_ipdl"}},[a("el-radio",{attrs:{label:1}},[e._v("Да")]),a("el-radio",{attrs:{label:2}},[e._v("Нет")]),a("el-radio",{attrs:{label:3}},[e._v("Нет данных")]),a("el-radio",{attrs:{label:4}},[e._v("Родственник ПДЛ")])],1)],1),a("el-form-item",{staticClass:"step_btn_list"},[a("el-button",{staticClass:"step_btn",attrs:{type:"success"},on:{click:function(t){return t.preventDefault(),e.createClient(t)}}},[e._v("Далее")])],1)],1)],1),a("div",{staticClass:"step_content step_2",class:{show:"2"==this.current_step}},[a("el-form",{staticClass:"form",attrs:{"label-width":"250px"}},[a("el-form-item",{attrs:{label:"Тип документа:"}},[a("el-radio-group",{model:{value:e.client_passport_type,callback:function(t){e.client_passport_type=t},expression:"client_passport_type"}},[a("el-radio",{attrs:{label:22636059}},[e._v("ID карта")]),a("el-radio",{attrs:{label:6976603642}},[e._v("ID (паспорт) обр. 2017")])],1)],1),a("el-form-item",{attrs:{label:"Серия документа:"}},[a("el-select",{attrs:{placeholder:"Выбрать серию"},model:{value:e.client_passport_seria,callback:function(t){e.client_passport_seria=t},expression:"client_passport_seria"}},e._l(e.client_passport_seria_options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"Номер документа:"}},[a("el-input",{directives:[{name:"mask",rawName:"v-mask",value:"#######",expression:"'#######'"}],attrs:{type:"text",placeholder:"Введите номер(только цифры)"},model:{value:e.client_passport_num,callback:function(t){e.client_passport_num=t},expression:"client_passport_num"}})],1),a("el-form-item",{attrs:{label:"Орган, выдавший документ:"}},[a("el-input",{attrs:{type:"text",placeholder:"Введите название органа, выдавшего документ"},model:{value:e.client_passport_who,callback:function(t){e.client_passport_who=t},expression:"client_passport_who"}})],1),a("el-form-item",{attrs:{label:"Дата выдачи:"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"Выберите дату",format:"dd/MM/yyyy","value-format":"yyyyMMdd"},model:{value:e.client_passport_date_start,callback:function(t){e.client_passport_date_start=t},expression:"client_passport_date_start"}})],1),a("el-form-item",{attrs:{label:"Дата окончания действия:"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"Выберите дату",format:"dd/MM/yyyy","value-format":"yyyyMMdd"},model:{value:e.client_passport_date_finish,callback:function(t){e.client_passport_date_finish=t},expression:"client_passport_date_finish"}})],1),a("el-form-item",{staticClass:"step_btn_list"},[a("el-button",{staticClass:"step_btn",attrs:{type:"success"},on:{click:function(t){return t.preventDefault(),e.createDoc(t)}}},[e._v("Далее")])],1)],1)],1),a("div",{staticClass:"step_content step_3",class:{show:"3"==this.current_step}},[a("el-form",{staticClass:"form",attrs:{"label-width":"250px"}},[a("h3",[e._v("Адрес прописки:")]),a("el-form-item",{attrs:{label:"Почтовый индекс:"}},[a("el-input",{directives:[{name:"mask",rawName:"v-mask",value:"######",expression:"'######'"}],attrs:{type:"text",placeholder:"720000"},model:{value:e.client_address_corp_zip,callback:function(t){e.client_address_corp_zip=t},expression:"client_address_corp_zip"}})],1),a("el-form-item",{attrs:{label:"Населенный пункт:"}},[a("el-select",{staticClass:"w100",attrs:{filterable:"",placeholder:"Введите населенный пункт"},model:{value:e.client_address_corp_city,callback:function(t){e.client_address_corp_city=t},expression:"client_address_corp_city"}},e._l(e.client_birth_place_option,(function(e){return a("el-option",{key:e.CITY_SRC_CFT_ID,attrs:{label:e.CITY_NAME,value:e.CITY_SRC_CFT_ID}})})),1)],1),a("el-form-item",{attrs:{label:"Улица:"}},[a("el-input",{attrs:{type:"text",placeholder:"Введите улицу"},model:{value:e.client_address_corp_street,callback:function(t){e.client_address_corp_street=t},expression:"client_address_corp_street"}})],1),a("el-form-item",{attrs:{label:"Дом:"}},[a("el-input",{attrs:{type:"text",placeholder:"Введите номер дома"},model:{value:e.client_address_corp_house,callback:function(t){e.client_address_corp_house=t},expression:"client_address_corp_house"}})],1),a("el-form-item",{attrs:{label:"Квартира:"}},[a("el-input",{attrs:{type:"text",placeholder:"Введите номер квартиры"},model:{value:e.client_address_corp_flat,callback:function(t){e.client_address_corp_flat=t},expression:"client_address_corp_flat"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-checkbox",{model:{value:e.address_identical,callback:function(t){e.address_identical=t},expression:"address_identical"}},[e._v("Адрес проживания совпадает с адресом прописки?")])],1),e.address_identical?e._e():a("div",{staticClass:"actual_address"},[a("h3",[e._v("Адрес проживания:")]),a("el-form-item",{attrs:{label:"Почтовый индекс:"}},[a("el-input",{directives:[{name:"mask",rawName:"v-mask",value:"######",expression:"'######'"}],attrs:{type:"text",placeholder:"720000"},model:{value:e.client_address_fact_zip,callback:function(t){e.client_address_fact_zip=t},expression:"client_address_fact_zip"}})],1),a("el-form-item",{attrs:{label:"Населенный пункт:"}},[a("el-select",{staticClass:"w100",attrs:{filterable:"",placeholder:"Введите населенный пункт"},model:{value:e.client_address_fact_city,callback:function(t){e.client_address_fact_city=t},expression:"client_address_fact_city"}},e._l(e.client_birth_place_option,(function(e){return a("el-option",{key:e.CITY_SRC_CFT_ID,attrs:{label:e.CITY_NAME,value:e.CITY_SRC_CFT_ID}})})),1)],1),a("el-form-item",{attrs:{label:"Улица:"}},[a("el-input",{attrs:{type:"text",placeholder:"Введите улицу"},model:{value:e.client_address_fact_street,callback:function(t){e.client_address_fact_street=t},expression:"client_address_fact_street"}})],1),a("el-form-item",{attrs:{label:"Дом:"}},[a("el-input",{attrs:{type:"text",placeholder:"Введите номер дома"},model:{value:e.client_address_fact_house,callback:function(t){e.client_address_fact_house=t},expression:"client_address_fact_house"}})],1),a("el-form-item",{attrs:{label:"Квартира:"}},[a("el-input",{attrs:{type:"text",placeholder:"Введите номер квартиры"},model:{value:e.client_address_fact_flat,callback:function(t){e.client_address_fact_flat=t},expression:"client_address_fact_flat"}})],1)],1),a("el-form-item",{staticClass:"step_btn_list"},[a("el-button",{staticClass:"step_btn",attrs:{type:"success"},on:{click:function(t){return t.preventDefault(),e.createAddressCorp()}}},[e._v("Далее")])],1)],1)],1),a("div",{staticClass:"step_content step_4",class:{show:"4"==this.current_step}},[a("el-form",{staticClass:"form",attrs:{"label-width":"200px"}},[a("el-form-item",{attrs:{label:"Номер телефона:"}},[a("el-input",{directives:[{name:"mask",rawName:"v-mask",value:"+996 (###) ## ## ##",expression:"'+996 (###) ## ## ##'"}],attrs:{type:"text",placeholder:"+996 (XXX) YY YY YY"},model:{value:e.client_phone_number,callback:function(t){e.client_phone_number=t},expression:"client_phone_number"}})],1),a("el-form-item",{staticClass:"step_btn_list"},[a("el-button",{staticClass:"step_btn",attrs:{type:"success"},on:{click:function(t){return t.preventDefault(),e.createContact()}}},[e._v("Далее")])],1)],1)],1),a("div",{staticClass:"step_content step_5",class:{show:"5"==this.current_step}},[a("el-form",{staticClass:"form",attrs:{"label-width":"140px"}},[a("h3",[e._v("Привязать карту")]),a("el-form-item",{attrs:{label:"ФИО"}},[a("el-input",{attrs:{disabled:""},model:{value:e.client_fullname,callback:function(t){e.client_fullname=t},expression:"client_fullname"}})],1),a("el-form-item",{attrs:{label:"ИНН"}},[a("el-input",{attrs:{type:"email",disabled:""},model:{value:e.client_inn,callback:function(t){e.client_inn=t},expression:"client_inn"}})],1),a("el-form-item",{attrs:{label:"Номер карты"}},[a("el-input",{directives:[{name:"mask",rawName:"v-mask",value:"#### #### #### ####",expression:"'#### #### #### ####'"}],model:{value:e.card_pan,callback:function(t){e.card_pan=t},expression:"card_pan"}})],1),a("el-form-item",{attrs:{label:"Сумма"}},[a("el-input",{directives:[{name:"mask",rawName:"v-mask",value:"#########",expression:"'#########'"}],model:{value:e.amount_sum,callback:function(t){e.amount_sum=t},expression:"amount_sum"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:this.card_pan.length<19||this.amount_sum.length<1},on:{click:function(t){return t.preventDefault(),e.mapCardToClient(t)}}},[e._v("Привязать карту")])],1)],1)],1)]):e._e(),"found"==e.showAddCard?a("el-form",{staticClass:"form",attrs:{"label-width":"140px"}},[a("h3",[e._v("Привязать карту")]),a("el-form-item",{attrs:{label:"ФИО"}},[a("el-input",{attrs:{type:"text",readonly:""},model:{value:e.client_fullname,callback:function(t){e.client_fullname=t},expression:"client_fullname"}})],1),a("el-form-item",{attrs:{label:"ИНН"}},[a("el-input",{attrs:{type:"email",readonly:""},model:{value:e.client_inn,callback:function(t){e.client_inn=t},expression:"client_inn"}})],1),a("el-form-item",{attrs:{label:"Номер карты"}},[a("el-input",{directives:[{name:"mask",rawName:"v-mask",value:"#### #### #### ####",expression:"'#### #### #### ####'"}],model:{value:e.card_pan,callback:function(t){e.card_pan=t},expression:"card_pan"}})],1),a("el-form-item",{attrs:{label:"Сумма"}},[a("el-input",{directives:[{name:"mask",rawName:"v-mask",value:"#########",expression:"'#########'"}],attrs:{type:"text"},model:{value:e.amount_sum,callback:function(t){e.amount_sum=t},expression:"amount_sum"}})],1),a("br"),a("br"),a("el-form-item",{attrs:{label:"Номер телефона"}},[a("el-input",{directives:[{name:"mask",rawName:"v-mask",value:"996 ### ######",expression:"'996 ### ######'"}],attrs:{type:"text",placeholder:"996 XXX YYYYYY"},model:{value:e.mctc_newphone,callback:function(t){e.mctc_newphone=t},expression:"mctc_newphone"}})],1),a("el-input",{attrs:{type:"hidden",readonly:""},model:{value:e.r_clnt_src_cft_id,callback:function(t){e.r_clnt_src_cft_id=t},expression:"r_clnt_src_cft_id"}}),a("el-input",{attrs:{type:"hidden",readonly:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:this.card_pan.length<19||this.amount_sum.length<1||this.mctc_newphone.length<14},on:{click:function(t){return t.preventDefault(),e.mapCardToClient(t)}}},[e._v("Привязать карту")])],1)],1):e._e()],1),this.processing?a("div",{staticClass:"loader"},[a("i",{staticClass:"el-icon-loading"})]):e._e()])},Te=[],Me=(a("c740"),{components:{},name:"AddClient",data:function(){return{pickBirthDateOptions:{disabledDate:function(e){return e.getTime()>Date.now()-5676e8}},processing:!1,current_step:"1",client_inn:"",client_lastname:"",client_fullname:"",client_firstname:"",client_midname:"",client_sex:"",client_resident:1,client_birth_place:"",selected_region:"",client_birth_place_region:"",client_birth_place_option:[],client_birth_filtered_place_option:[],client_birth_place_region_option:[],client_birth_place_eng:"Test",client_birthdate:"",client_passport_seria:"",client_passport_seria_options:[{value:"AN",label:"AN"},{value:"ID",label:"ID"}],client_passport_num:"",client_passport_type:"",client_passport_who:"",client_passport_date_start:"",client_passport_date_finish:"",client_birth_year:"",client_marriage_status:"",client_marriage_options:[],client_faillevel:"0",client_objective:"Клиент МКК",client_ipdl:"",client_category:"1037420476",card_pan:"",amount_sum:"",showAddCard:"",address_identical:!0,client_address_corp_zip:"",client_address_corp_city:"",client_address_corp_house:"",client_address_corp_street:"",client_address_corp_flat:"",client_address_fact_zip:"",client_address_fact_city:"",client_address_fact_house:"",client_address_fact_street:"",client_address_fact_flat:"",client_phone_number:"",r_clnt_src_cft_id:"",sorted_places:[],date:"",mctc_cuser:"",mctc_newphone:"",username:this.$getUser()}},props:{},methods:{getCityFromRegion:function(){var e=this.selected_region;this.client_birth_filtered_place_option=this.client_birth_place_option.filter((function(t){return t.REGN_ID==e}))},swapStep:function(e){this.current_step=e},checkClient:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.processing=!0,a="/ibs/getClient?inn="+e.client_inn,t.next=5,e.$axios.get(a);case 5:if(r=t.sent,200!=r.status){t.next=21;break}if(e.processing=!1,r=r.data,e.showAddCard=r.r_err_code,"found"!=r.r_err_code){t.next=16;break}e.client_fullname=r.r_clnt_name,e.r_clnt_src_cft_id=r.r_clnt_src_cft_id,e.card_pan="",t.next=21;break;case 16:if("not_found"!=r.r_err_code){t.next=21;break}return"1"==e.client_inn[0]?e.client_sex=2047936:"2"==e.client_inn[0]&&(e.client_sex=2047935),e.client_birthdate=e.client_inn.slice(5,9)+e.client_inn.slice(3,5)+e.client_inn.slice(1,3),t.next=21,e.getDictionary();case 21:t.next=27;break;case 23:t.prev=23,t.t0=t["catch"](0),e.processing=!1,console.log("[ERR]",t.t0);case 27:case"end":return t.stop()}}),t,null,[[0,23]])})))()},getDictionary:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("/ibs/getDictionary?dictName=family_types");case 3:a=t.sent,200==a.status&&(e.client_marriage_options=a.data),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log("[ERR]",t.t0);case 10:return t.prev=10,t.next=13,e.$axios.get("/ibs/getDictionary?dictName=cities");case 13:r=t.sent,200==r.status&&(e.client_birth_place_option=r.data,n=[],e.client_birth_place_option.filter((function(e){var t=n.findIndex((function(t){return t.REGN_ID==e.REGN_ID}));return t<=-1&&n.push(e),null})),e.client_birth_place_region_option=n),t.next=20;break;case 17:t.prev=17,t.t1=t["catch"](10),console.log("[ERR]",t.t1);case 20:case"end":return t.stop()}}),t,null,[[0,7],[10,17]])})))()},createClient:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.processing=!0,a={inn:e.client_inn,resident:e.client_resident,birthDate:e.client_birthdate,mariageStatus:e.client_marriage_status,sex:e.client_sex,birthPlace:e.client_birth_place,birthPlaceEng:e.client_birth_place_eng,lastName:e.client_lastname,firstName:e.client_firstname,midName:e.client_midname,ipdl:e.client_ipdl,failLevel:e.client_faillevel,objective:e.client_objective,category:e.client_category},r="/ibs/createClient",t.next=6,e.$axios.post(r,a);case 6:n=t.sent,200!=n.status&&201!=n.status||(e.processing=!1,"OK"==n.data.r_err_code?(e.swapStep(2),e.client_fullname=e.client_lastname+" "+e.client_firstname+" "+e.client_midname,e.r_clnt_src_cft_id=n.data.r_clnt_src_cft_id):alert("Ошибка запроса. Попробуйте позже.")),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](0),e.processing=!1,console.log("[ERR]",t.t0),t.t0.response&&alert(t.t0.response.data.message);case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},createDoc:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.processing=!0,a={clntSrcCftId:String(e.r_clnt_src_cft_id),docNum:e.client_passport_num,docType:e.client_passport_type,docSer:e.client_passport_seria,docWho:e.client_passport_who,docDate:e.client_passport_date_start,docDateEnd:e.client_passport_date_finish,docBirthPlace:"Тест"},r="/ibs/createDoc",t.next=6,e.$axios.post(r,a);case 6:n=t.sent,200!=n.status&&201!=n.status||(e.processing=!1,"OK"==n.data.r_err_code?e.swapStep(3):alert("Ошибка запроса. Попробуйте позже.")),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](0),e.processing=!1,console.log("[ERR]",t.t0),alert(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},createAddressCorp:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.processing=!0,a={clntSrcCftId:String(e.r_clnt_src_cft_id),type:"2047919",zip:e.client_address_corp_zip,city:e.client_address_corp_city,house:e.client_address_corp_house,korpus:"-",flat:e.client_address_corp_flat,street:e.client_address_corp_street},r="/ibs/createAddress",t.next=6,e.$axios.post(r,a);case 6:n=t.sent,200!=n.status&&201!=n.status||("OK"==n.data.r_err_code?e.createAddressFact():alert("Ошибка запроса. Попробуйте позже.")),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),e.processing=!1,alert(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},createAddressFact:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={},a=e.address_identical?{clntSrcCftId:String(e.r_clnt_src_cft_id),type:"2047922",zip:e.client_address_corp_zip,city:e.client_address_corp_city,house:e.client_address_corp_house,korpus:"-",flat:e.client_address_corp_flat,street:e.client_address_corp_street}:{clntSrcCftId:String(e.r_clnt_src_cft_id),type:"2047922",zip:e.client_address_fact_zip,city:e.client_address_fact_city,house:e.client_address_fact_house,korpus:"-",flat:e.client_address_fact_flat,street:e.client_address_fact_street},r="/ibs/createAddress",t.next=6,e.$axios.post(r,a);case 6:n=t.sent,200!=n.status&&201!=n.status||(e.processing=!1,"OK"==n.data.r_err_code?e.swapStep(4):alert("Ошибка запроса. Попробуйте позже.")),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),e.processing=!1,console.log("[ERR]",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},createContact:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.processing=!0,a={clntSrcCftId:String(e.r_clnt_src_cft_id),numb:e.client_phone_number},r="/ibs/createContact",t.next=6,e.$axios.post(r,a);case 6:n=t.sent,200!=n.status&&201!=n.status||(e.processing=!1,"OK"==n.data.r_err_code?e.swapStep(5):alert("Ошибка запроса. Попробуйте позже.")),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),e.processing=!1,alert(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},mapCardToClient:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.processing=!0,a="/ibs/mapCardToClient",r={clntSrcCftId:String(e.r_clnt_src_cft_id),cardPan:e.card_pan.replace(/\s+/g,""),name:e.client_fullname,inn:e.client_inn,amount:parseFloat(e.amount_sum),numb:e.mctc_newphone.replace(/\s+/g,""),cuser:e.username},t.next=6,e.$axios.post(a,r);case 6:n=t.sent,200!=n.status&&201!=n.status||(e.processing=!1,"OK"==n.data.r_err_code?(alert("Успешно"),e.$router.push("/clients")):"card_not_found"==n.data.r_err_code?alert("Карта не найдена."):"incorrect_params"==n.data.r_err_code?alert("Неверные параметры"):"incorrect_card_number"==n.data.r_err_code?alert("Неверный номер карты"):"card_mapped_to_client"==n.data.r_err_code?alert("Данная карта уже привязана"):"server_error"==n.data.r_err_code?(alert("Ошибка сервера, попробуйте позже."),e.$router.push("/clients")):(alert("Непредвиденная ошибка, попробуйте позже."),e.$router.push("/clients"))),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),e.processing=!1,console.log("[ERR]",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()}},mounted:function(){return Object(T["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}),Ie=Me,Ne=(a("269b"),Object(c["a"])(Ie,je,Te,!1,null,"a10818ea",null)),Ae=Ne.exports,Pe=void 0;r["default"].use(p["a"]);var Ue=new p["a"]({mode:"hash",routes:Ke()});function Ke(){return[{path:"/",name:"Главная",meta:{auth:!0},component:$,children:[{path:"/clients",name:"Clients",meta:{auth:!0},component:A},{path:"/transactions",name:"Transactions",meta:{auth:!0},component:ee},{path:"/reports",name:"Reports",meta:{auth:!0},component:ie},{path:"/companies",name:"Companies",meta:{auth:!0},component:F},{path:"/settings",name:"Settings",meta:{auth:!0},component:be},{path:"/users",name:"Users",meta:{auth:!0},component:de},{path:"/requests",name:"Requests",meta:{auth:!0},component:B},{path:"/add-client",name:"AddClient",meta:{auth:!0},component:Ae}]},{path:"/login",name:"Login",meta:{auth:!1},component:Ce},{path:"*",name:"ErrorPage",meta:{auth:!1},component:Ee}]}Ue.beforeEach((function(e,t,a){var n=r["default"].ls.get("token",null),s=e.matched.some((function(e){return e.meta.auth}));s&&!n?(a("login"),Pe.$localStorage.clear()):a()}));var Ye=Ue,ze=a("2f62"),Fe=a("5c96"),Le=a.n(Fe),He=a("dccd"),qe=a.n(He),Xe=a("3a60"),Ge=a.n(Xe),Be=(a("0fae"),a("bc3a")),Je=a.n(Be),Qe=a("ee83"),We=a.n(Qe),Ve=new We.a;var Ze=Je.a.create({baseURL:"/v1"});Ze.interceptors.request.use((function(e){var t=Ve.get("token",null);return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),Ze.interceptors.response.use((function(e){return e&&e.data&&e.data.code&&401==e.data.code&&"Unauthorized"==e.data.status&&(window.location="/#/login"),e}),(function(e){return e.response&&e.response.status&&401==e.response.status&&(alert("Сессия истекла"),window.location="/#/login"),Promise.reject(e)}));var et={install:function(e){e.prototype.$axios=Ze}},tt=a("53ca"),at=new We.a,rt={install:function(e){e.prototype.$setToken=function(e){at.set("token",e)},e.prototype.$getToken=function(){return at.get("token",null)},e.prototype.$setUser=function(e){"object"==Object(tt["a"])(e)&&(e=JSON.stringify(e)),e=btoa(e),at.set("user",e)},e.prototype.$getUser=function(){var e=at.get("user",null);if(e)try{return JSON.parse(atob(e))}catch(t){return atob(e)}return null},e.prototype.$setCurrentMkk=function(e){at.set("current_mkk",e)},e.prototype.$getCurrentMkk=function(e){return at.get("current_mkk",null)},e.prototype.$localStorage=at,e["ls"]=at}},nt=(a("7db0"),a("13d5"),a("2909")),st=[{id:1,title:"iPad 4 Mini",price:500.01,inventory:2},{id:2,title:"H&M T-Shirt White",price:10.99,inventory:10},{id:3,title:"Charli XCX - Sucker CD",price:19.99,inventory:5}],it={getProducts:function(e){setTimeout((function(){return e(st)}),100)},buyProducts:function(e,t,a){setTimeout((function(){Math.random()>.5||navigator.webdriver?t():a()}),100)}},lt=function(){return{items:[],checkoutStatus:null}},ct={cartProducts:function(e,t,a){return e.items.map((function(e){var t=e.id,r=e.quantity,n=a.products.all.find((function(e){return e.id===t}));return{title:n.title,price:n.price,quantity:r}}))},cartTotalPrice:function(e,t){return t.cartProducts.reduce((function(e,t){return e+t.price*t.quantity}),0)}},ot={checkout:function(e,t){var a=e.commit,r=e.state,n=Object(nt["a"])(r.items);a("setCheckoutStatus",null),a("setCartItems",{items:[]}),it.buyProducts(t,(function(){return a("setCheckoutStatus","successful")}),(function(){a("setCheckoutStatus","failed"),a("setCartItems",{items:n})}))},addProductToCart:function(e,t){var a=e.state,r=e.commit;if(r("setCheckoutStatus",null),t.inventory>0){var n=a.items.find((function(e){return e.id===t.id}));n?r("incrementItemQuantity",n):r("pushProductToCart",{id:t.id}),r("products/decrementProductInventory",{id:t.id},{root:!0})}}},ut={pushProductToCart:function(e,t){var a=t.id;e.items.push({id:a,quantity:1})},incrementItemQuantity:function(e,t){var a=t.id,r=e.items.find((function(e){return e.id===a}));r.quantity++},setCartItems:function(e,t){var a=t.items;e.items=a},setCheckoutStatus:function(e,t){e.checkoutStatus=t}},pt={namespaced:!0,state:lt,getters:ct,actions:ot,mutations:ut},dt=function(){return{all:[]}},_t={},mt={getAllProducts:function(e){var t=e.commit;it.getProducts((function(e){t("setProducts",e)}))}},ft={setProducts:function(e,t){e.all=t},decrementProductInventory:function(e,t){var a=t.id,r=e.all.find((function(e){return e.id===a}));r.inventory--}},vt={namespaced:!0,state:dt,getters:_t,actions:mt,mutations:ft};r["default"].use(ze["a"]);var ht=!1,bt=new ze["a"].Store({modules:{cart:pt,products:vt},strict:ht,plugins:[]});r["default"].config.performance=!0,r["default"].use(ze["a"]),r["default"].use(et),r["default"].use(rt),r["default"].use(Le.a,{locale:qe.a}),r["default"].use(Ge.a),new r["default"]({el:"#app",router:Ye,store:bt,template:"<App/>",components:{App:u}})},"574b":function(e,t,a){"use strict";a("43b1")},5794:function(e,t,a){"use strict";a("b87f")},"5cc5":function(e,t,a){"use strict";a("132d")},6775:function(e,t,a){"use strict";a("a175")},"77e90":function(e,t,a){e.exports=a.p+"img/we-logo-text.b37747c4.png"},8253:function(e,t,a){},"85ec":function(e,t,a){},"8be3":function(e,t,a){"use strict";a("dcd7")},"8d99":function(e,t,a){"use strict";a("8253")},"96e2":function(e,t,a){"use strict";a("b7d6")},"9cc4":function(e,t,a){},a175:function(e,t,a){},b0a4:function(e,t,a){},b7d6:function(e,t,a){},b87f:function(e,t,a){},b929:function(e,t,a){"use strict";a("52c7")},dcd7:function(e,t,a){},ee83:function(e,t,a){a("99af");var r=a("970b"),n=a("5bc3"),s=function(){"use strict";function e(t){r(this,e),t||(t="webank"),this.namespace="".concat(t,".")}return n(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)throw new Error("Ошибка передан пуской параметр key");e="".concat(this.namespace).concat(e),e=btoa(e);var a=window.localStorage.getItem(e);return a&&"null"!=a?atob(a):t}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e)throw new Error("Ошибка передан пуской параметр key");e="".concat(this.namespace).concat(e),e=btoa(e),window.localStorage.setItem(e,btoa(t))}},{key:"remove",value:function(e){if(!e)throw new Error("Ошибка передан пуской параметр key");e="".concat(this.namespace).concat(e),window.localStorage.removeItem(e)}},{key:"clear",value:function(){window.localStorage.clear()}}]),e}();e.exports=s}});
//# sourceMappingURL=app.9532a9d7.js.map